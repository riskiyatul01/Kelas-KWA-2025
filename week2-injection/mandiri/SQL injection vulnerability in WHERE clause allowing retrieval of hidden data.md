# SQL injection vulnerability in WHERE clause allowing retrieval of hidden data

![WhatsApp Image 2025-09-10 at 20 00 08_b7f64749](https://github.com/user-attachments/assets/eba8de38-8454-464e-a4b5-032deb9a3557)

Aplikasi web ini memiliki kerentanan SQL Injection pada fungsionalitas filter kategori produk. Parameter category yang dikirim melalui URL tidak divalidasi atau disanitasi dengan benar sebelum dimasukkan ke dalam query SQL di sisi server. Hal ini memungkinkan penyerang untuk memanipulasi query database untuk melewati logika bisnis aplikasi dan mengakses data yang seharusnya tidak dapat diakses, dalam kasus ini adalah produk yang belum dirilis.

- Tujuan: Menampilkan satu atau lebih produk yang belum dirilis (unreleased).
- Konteks: Aplikasi memiliki filter kategori produk yang rentan terhadap SQL injection.
- Query Asli: Aplikasi menjalankan query SQL yang terlihat seperti ini saat pengguna memilih kategori, misalnya 'Gifts':
```
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```
- Kondisi: Produk yang ditampilkan secara normal adalah produk yang released = 1. Produk yang tidak dirilis kemungkinan besar memiliki released = 0.
- Solusi Singkat yang Diberikan: Menggunakan payload ' OR 1=1-- pada parameter category.

## Langkah-Langkah Pengerjaan

Langkah 1: Akses Aplikasi dan Identifikasi Titik Injeksi
- Buka lab dengan menekan tombol "ACCESS THE LAB".
- akan melihat halaman toko online dengan berbagai kategori produk seperti "Gifts", "Lifestyle", dll.
- Klik salah satu kategori, misalnya "Gifts". url yang muncul : 
```
[https://[id-lab].web-security-academy.net/filter?category=Gifts](https://0a150084031d8a59809da862005400be.web-security-academy.net/filter?category=Gifts)
```

<img width="1135" height="222" alt="image" src="https://github.com/user-attachments/assets/ce40b3ae-8219-4f82-a608-40d074e21852" />

<img width="901" height="104" alt="image" src="https://github.com/user-attachments/assets/7e730d9f-ff76-4aa9-beea-61e4c3bd99f3" />


Langkah 2: Mempersiapkan Serangan SQL Injection
Tujuan disini adalah memanipulasi query SQL agar kondisi AND released = 1 diabaikan dan kita bisa melihat semua produk, termasuk yang belum dirilis.

Analisis Payload: 
- ' : Tanda kutip tunggal ini digunakan untuk "menutup" string dari nilai kategori yang ada. Jika input kita adalah Gifts, query-nya adalah ... category = 'Gifts' .... Dengan menambahkan ' di awal payload, kita mengubahnya menjadi ... category = 'Gifts'' ... yang akan menyebabkan error sintaks, tetapi ini adalah langkah awal yang baik untuk mengonfirmasi adanya kerentanan.
- OR 1=1 : Ini adalah kondisi boolean yang akan selalu bernilai TRUE. Dengan menambahkannya, kita mengubah logika klausa WHERE.
- -- : Ini adalah sintaks untuk komentar di banyak dialek SQL (seperti PostgreSQL, MySQL, dll.). Apapun yang tertulis setelah tanda ini dalam satu baris akan diabaikan oleh database. Ini sangat penting untuk menonaktifkan sisa dari query asli, yaitu AND released = 1.
- Input (Payload) kita: Gifts' OR 1=1--

Langkah 3: Mengeksekusi Serangan dan Verifikasi
- Kembali ke browser dan Ubah nilai parameter category di URL.
- Ganti Gifts dengan payload: ' OR 1=1--
- URL Setelah Dimodifikasi:
```
https://0a150084031d8a59809da862005400be.web-security-academy.net/filter?category=` 1--
```
- Tekan Enter untuk mengirimkan request.
- Halaman akan memuat ulang dan sekarang seharusnya menampilkan semua produk, termasuk produk-produk yang sebelumnya tersembunyi (yang belum dirilis).
- Lab akan mendeteksi bahwa Anda berhasil menampilkan data tersembunyi dan akan menampilkan pesan "Congratulations, you solved the lab!".

<img width="943" height="54" alt="image" src="https://github.com/user-attachments/assets/4b111a93-9485-4bc5-be07-482bddf0f87a" />

<img width="1574" height="914" alt="image" src="https://github.com/user-attachments/assets/6c354049-ca61-45c7-b09d-0ed2eee3b0cb" />


## Dampak

Dampak dari kerentanan ini adalah Pembocoran Informasi Sensitif (Information Disclosure). Penyerang dapat melihat data yang seharusnya tidak dipublikasikan, seperti produk yang belum dirilis, draf artikel, atau data pengguna lain, tergantung pada struktur database.
